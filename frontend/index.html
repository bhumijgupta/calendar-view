<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script
      src="https://code.jquery.com/jquery-3.5.0.min.js"
      integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ="
      crossorigin="anonymous"
      defer
    ></script>
    <script>
      window.addEventListener("message", (message) => {
        if (message.data.type === "status") {
          console.log(message.data);
          sessionStorage.setItem("token", message.data.tokens);
          if (message.data.loginStatus) {
            let token = sessionStorage.getItem("token");
            $.get({
              url: "http://localhost:3000/api/getEvents",
              beforeSend: function (xhr) {
                xhr.setRequestHeader("Authorization", "Basic " + token);
              },
            })
              .done((data) => console.log(data))
              .fail((err) => console.log(err));
          }
        }
      });
    </script>
  </head>
  <body>
    <a href="http://localhost:3000/auth/" target="_blank">Login</a>
  </body>
</html>
